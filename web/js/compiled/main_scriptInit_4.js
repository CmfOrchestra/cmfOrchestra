var LM={reseTool:function(){jQuery("ul li:last-child").addClass("last");jQuery("body").attr("id","page")},delayedsrc:function(){jQuery(document).ready(function(){$("img").each(function(){$(this).attr("src",$(this).attr("delayedsrc"))})})},obfuscateLink:function(){jQuery(".hiddenLink").each(function(e,g){$(g).removeClass("hiddenLink");var b="0A12B34C56D78E9F";var f=document.createElement("a");var k=g.className.split(" ");var c=k[0];var j="";for(var d=0;d<c.length;d+=2){var a=b.indexOf(c.charAt(d));var h=b.indexOf(c.charAt(d+1));j+=String.fromCharCode((a*16)+h)}k.shift();f.className=k.join(" ");f.href=j;f.target="_blank";f.innerHTML=g.innerHTML;$(g).replaceWith(f)})},checkForm:function(){jQuery('input:not(input[type="submit"]), textarea').each(function(){if(jQuery(this).attr("data-validate")){defaultValue=jQuery(this).attr("data-validate");jQuery(this).val(defaultValue)}});$("textarea[maxlength]").keypress(function(){var d=parseInt($(this).attr("maxlength"));var g=$(this).val();var f=g.length;if(f>d){var e=g.substr(0,d);$(this).val(e)}});var c=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;var a=/^((0[1-9])|([1-8][0-9])|(9[0-8])|(2A)|(2B))[0-9]{3}$/;var b=/^0[1-6]{1}(([0-9]{2}){4})|((\s[0-9]{2}){4})|((-[0-9]{2}){4})$/;jQuery("form").each(function(){jQuery(this).live("submit",function(d){jQuery("input, select, textarea",this).removeClass("error");jQuery("input.required.text:visible",this).each(function(){if(jQuery(this).val()==jQuery(this).attr("data-validate")||jQuery(this).val()==""){jQuery(this).addClass("error")}else{jQuery(this).removeClass("error")}});jQuery("textarea.required:visible",this).each(function(){if(jQuery(this).val()==jQuery(this).attr("data-validate")||jQuery(this).val()==""){jQuery(this).addClass("error")}else{jQuery(this).removeClass("error")}});jQuery("input.required.email:visible",this).each(function(){if(!c.test(jQuery(this).val())||jQuery(this).val()==""){jQuery(this).addClass("error")}else{jQuery(this).removeClass("error")}});jQuery("input.required.phone:visible",this).each(function(){if(!b.test(jQuery(this).val())||jQuery(this).val()==""){jQuery(this).addClass("error")}else{jQuery(this).removeClass("error")}});jQuery("input.phoneField:visible",this).each(function(){if(b.test(jQuery(this).val())||jQuery(this).val()==jQuery(this).attr("data-validate")){jQuery(this).removeClass("error")}else{jQuery(this).addClass("error")}});jQuery("input.required.fax:visible",this).each(function(){if(!b.test(jQuery(this).val())){jQuery(this).addClass("error")}else{jQuery(this).removeClass("error")}});jQuery("input.required.postCode:visible",this).each(function(){if(!a.test(jQuery(this).val())){jQuery(this).addClass("error")}else{jQuery(this).removeClass("error")}});jQuery("select.required:visible",this).each(function(){if(jQuery("option:selected",this).val()==0){jQuery(this).addClass("error")}else{jQuery(this).removeClass("error")}});jQuery(".radioGroup",this).each(function(){that=this;if(jQuery('input[type="radio"].required:checked',this).length){jQuery("label",this).removeClass("error")}else{jQuery("label",this).addClass("error")}});jQuery('input[type="checkbox"].required:visible',this).each(function(){if(jQuery(this).is(":checked")){jQuery(this).siblings("label").removeClass("error")}else{jQuery(this).siblings("label").addClass("error")}});if(jQuery(".error",this).length){jQuery(".error-message",this).remove();if(jQuery("input.text.error",this).length||jQuery("select.error").length||jQuery(".radioLabel.error").length||jQuery(".checkboxLabel.error").length){jQuery(this).prepend('<p class="error-message">Les champs marqués (*) sont obligatoires</p>')}if(jQuery("input.email.error",this).length){jQuery(this).prepend("<p class='error-message'>L'email doit avoir un format correct</p>")}if(jQuery("input.postCode.error",this).length){jQuery(this).prepend("<p class='error-message'>Le code postal doit avoir un format correct</p>")}if(jQuery("input.phone.error",this).length){jQuery(this).prepend("<p class='error-message'>Le téléphone doit avoir un format correct</p>")}if(jQuery("input.phone.fax",this).length){jQuery(this).prepend("<p class='error-message'>Le fax doit avoir un format correct</p>")}d.preventDefault()}else{jQuery("input[data-validate]:not('.required')",this).each(function(){if(jQuery(this).val()==jQuery(this).attr("data-validate")){jQuery(this).val("")}})}})})},init:function(){LM.reseTool();LM.checkForm();LM.obfuscateLink();LM.delayedsrc()}};jQuery(document).ready(function(){LM.init()});